# =============================================================================
# QUILY CHATBOT - Environment Configuration
# =============================================================================
# This file documents all environment variables used by the application.
# Copy this file to `.env.local` and fill in your values.
#
# LEGEND:
#   [REQUIRED]     - Must be set for the app to function
#   [CONDITIONAL]  - Required only if using a specific feature/provider
#   [OPTIONAL]     - Enhances functionality but has fallbacks
# =============================================================================


# =============================================================================
# SUPABASE (Vector Database) - [REQUIRED]
# =============================================================================
# These are required for RAG (Retrieval-Augmented Generation) to work.
# The app uses Supabase as a vector database to store and search documentation.
# Get these from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api

# Public URL for your Supabase project (safe to expose to browser)
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url

# Service role key for server-side operations (KEEP SECRET - never expose to browser)
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# Legacy aliases used by ingestion scripts (scripts/ingest/)
# Set these to the same values as above for backwards compatibility
SUPABASE_URL=your_supabase_project_url
SUPABASE_SERVICE_KEY=your_supabase_service_role_key


# =============================================================================
# OPENROUTER - [CONDITIONAL]
# =============================================================================
# Required if using OpenRouter as your LLM/embedding provider.
# Not needed if using Chutes exclusively.
# Get your key from: https://openrouter.ai/keys

# API key for OpenRouter (provides access to multiple LLM providers)
OPENROUTER_API_KEY=your_openrouter_api_key

# Embedding model for RAG queries (defaults to text-embedding-3-small)
# OPENROUTER_EMBEDDING_MODEL=openai/text-embedding-3-small


# =============================================================================
# CHUTES AI (OAuth Authentication) - [CONDITIONAL]
# =============================================================================
# Required if using Chutes as your LLM provider.
# Chutes uses OAuth 2.0 for authentication.
# Register your OAuth app at: https://chutes.ai (or your Chutes dashboard)

# Master kill switch for Chutes integration
# Set to 'false' to disable Chutes completely (shows "Coming soon" in UI)
# Set to 'true' or omit to enable Chutes (will then check credentials)
# NEXT_PUBLIC_CHUTES_ENABLED=true

# OAuth client credentials (KEEP SECRET)
CHUTES_OAUTH_CLIENT_ID=cid_xxx
CHUTES_OAUTH_CLIENT_SECRET=csc_xxx

# OAuth scopes - defines what permissions the app requests
# Default: "profile chutes:read chutes:invoke" (sufficient for most use cases)
# Available scopes: profile, balance, quota, usage, account:read, chutes:read, chutes:invoke, etc.
CHUTES_OAUTH_SCOPES="profile chutes:read chutes:invoke"

# Your application's public URL (used to build OAuth callback URL)
# For local development, use http://localhost:3000
# For production, use your deployed domain (e.g., https://chat.example.com)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# [OPTIONAL] Override the OAuth callback URL
# Default: ${NEXT_PUBLIC_APP_URL}/api/auth/chutes/callback
# Only set this if your callback URL differs from the default pattern
# CHUTES_OAUTH_REDIRECT_URI=https://your-domain.com/api/auth/chutes/callback

# [OPTIONAL] Chutes API key for server-side model discovery
# OAuth tokens cannot list models, so this API key is used to fetch the model catalog.
# Get your key from: https://chutes.ai/app/api (or Chutes CLI)
CHUTES_API_KEY=cpk_xxx

# [OPTIONAL] Override the Chutes Identity Provider base URL
# Default: https://api.chutes.ai
# Only set this for custom/staging Chutes instances
# CHUTES_IDP_BASE_URL=https://api.chutes.ai


# =============================================================================
# CHUTES AI (Models) - [OPTIONAL]
# =============================================================================
# Optional model configuration for Chutes provider.
# These allow you to specify default models for LLM and embedding operations.

# Server-side default LLM model (used when no model specified in request)
# CHUTES_DEFAULT_MODEL=https://your-llm-chute.chutes.ai

# Client-side default LLM model (shown in UI settings)
# NEXT_PUBLIC_CHUTES_DEFAULT_MODEL=https://your-llm-chute.chutes.ai

# Server-side embedding model for RAG queries
# Default: https://embeddings.chutes.ai
# CHUTES_EMBEDDING_MODEL=https://embeddings.chutes.ai

# Client-side embedding model override (shown in UI settings)
# NEXT_PUBLIC_CHUTES_EMBEDDING_MODEL=https://embeddings.chutes.ai

# [OPTIONAL] Override the curated model list shown in the dropdown
# By default, a curated list of 8 high-quality models is shown.
# Power users can still use any model via the manual URL input field.
# Format: comma-separated slugs (e.g., "chutes-deepseek-ai-deepseek-v3,chutes-qwen-qwen3-32b")
# CHUTES_ALLOWED_LLM_MODELS=slug1,slug2,slug3
# CHUTES_ALLOWED_EMBEDDING_MODELS=slug1,slug2


# =============================================================================
# RAG ENHANCEMENTS - [OPTIONAL]
# =============================================================================
# Optional services that improve RAG (documentation search) quality.

# Cohere API key for reranking search results
# Improves RAG relevance by 20-35% by intelligently reordering results
# If not provided, falls back to similarity-based selection (still works fine)
# Get your key from: https://dashboard.cohere.com/api-keys
COHERE_API_KEY=your_cohere_api_key_optional


# =============================================================================
# GITHUB - [OPTIONAL]
# =============================================================================
# Used by documentation sync scripts (scripts/sync-docs/).
# Increases GitHub API rate limits from 60/hour to 5,000/hour.
# Not required for running the app, only for syncing docs from GitHub repos.
# Create a token at: https://github.com/settings/tokens (no scopes needed for public repos)

GITHUB_TOKEN=ghp_your_token_here


# =============================================================================
# UI CUSTOMIZATION - [OPTIONAL]
# =============================================================================
# Optional settings to customize the chat UI behavior.

# Default model ID for OpenRouter provider
# NEXT_PUBLIC_DEFAULT_MODEL_ID=anthropic/claude-3.5-sonnet

# Additional models to show in the model selector (JSON array)
# NEXT_PUBLIC_ADDITIONAL_MODELS=["custom/model-1", "custom/model-2"]
